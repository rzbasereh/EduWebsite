{% extends 'teacher/layouts/base_layout.html' %}
{% load static %}
{% load custom_filter %}

{% block title %}گزارش ها{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-3">
            {% for report in reports %}
                <div class="card">
                    <div class="card-body">
                        {{ report.id }}
                        <img src="{{ report.get_teacher_avatar }}" alt="{{ report.teacher.get_full_name }}-profile"
                             width="100px">
                        {% if report|has_attachment:"report" %}
                            <svg class="bi bi-paperclip" width="1em" height="1em" viewBox="0 0 16 16"
                                 fill="currentColor"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                      d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"></path>
                            </svg>
                        {% endif %}
                        <br>
                        {{ report.get_time_diff }}<br>
                        {{ report.teacher.get_full_name }}<br>
                        {{ report.text|slice:100 }}...
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="col-9">
            <form method="post" action="{% url 'manager:reply_report' %}">
                {% csrf_token %}
                <input type="text" value="2" name="pk" hidden>
                <div class="form-group">
                    <label for="reportReply"></label>
                    <textarea class="form-control" id="reportReply" rows="3"
                              placeholder="متن پیام" name="text"></textarea>
                </div>
                <div class="form-group">
                    <input class="form-control-file" type="file" name="attachment">
                </div>
                <button type="submit" class="btn btn-blue">
                    <svg class="bi bi-cursor" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103zM2.25 8.184l3.897 1.67a.5.5 0 0 1 .262.263l1.67 3.897L12.743 3.52 2.25 8.184z"></path>
                    </svg>
                    <span>ارسال پیام</span>
                </button>
            </form>
        </div>
    </div>
{% endblock %}